# AliceStation-bot

## Описание
AliceStation-bot - это Telegram бот, который позволяет управлять устройствами Яндекс Станция через текстовые и голосовые команды. Пользователи могут авторизоваться в своем Яндекс аккаунте, выбрать устройство для взаимодействия и отправлять команды через бота.

## Основные возможности
- Авторизация в Яндекс аккаунте через ввод логина и пароля.
- Ввод кода подтверждения для двухфакторной аутентификации.
- Выбор станции для взаимодействия.
- Отправка текстовых и голосовых команд на выбранное устройство.
- Распознавание голосовых команд с помощью AssemblyAI.

## Технологии
Проект реализован с использованием следующих технологий:
- **aiogram**: Асинхронная библиотека для работы с Telegram API.
- **aiohttp**: Библиотека для реализации HTTP-запросов и работы с сессиями.
- **pydub**: Библиотека для обработки аудиофайлов.
- **pickle**: Модуль для сериализации и десериализации объектов Python.
- **AssemblyAI**: Сервис для распознавания речи.
- **Redis**: Используется для хранения состояний бота и быстрого доступа к данным.
- **NGINX**: Веб-сервер, который обеспечивает проксирование запросов к боту и поддержку SSL.
- **ngrok**: Сервис для временного создания туннелей, используемый для тестирования веб-хуков без необходимости настройки публичного домена.
- **Docker**: Платформа для разработки, доставки и запуска приложений в контейнерах.
- **Docker Compose**: Инструмент для определения и управления многоконтейнерными Docker приложениями.
- **GitHub Actions**: Сервис для автоматизации рабочих процессов, включая CI/CD.

## Установка и запуск

### Настройка окружения
Установите Docker и Docker Compose на вашем компьютере.

### Клонирование репозитория

``` sh
git clone https://github.com/potesuch/alicestaion-bot.git
cd alicestation-bot
```

### Настройка конфигурации
Создайте файл **infra/.env** и заполните его данными:

``` plaintext
BOT_TOKEN=<ваш токен бота>
ASSEMBLYAI_TOKEN=<ваш токен AssemblyAI>
REDIS_HOST=<хост Redis>
REDIS_PORT=<порт Redis>
REDIS_DB=<номер базы данных Redis>
WEB_SERVER_HOST=<хост веб-сервера>
WEB_SERVER_PORT=<порт веб-сервера>
NGROK_AUTH_TOKEN=<ваш токен ngrok>
```

### Запуск приложения
Выполните команду:

``` sh
docker-compose up --build
```

## Основные команды

### Команды для взаимодействия с ботом
- /start: Начало работы с ботом, запрос логина и пароля.
- Ввод логина и пароля в формате login:password.
- Ввод кода подтверждения (если включена двухфакторная аутентификация).
- Выбор станции для взаимодействия.
- Отправка текстовых и голосовых команд на выбранное устройство.
- Текстовая команда выход для выхода из режима общения с устройством.

## Примечания
Для корректной работы с голосовыми командами необходимо настроить и указать API ключ AssemblyAI в файле .env.
Убедитесь, что ваш Docker и Docker Compose установлены и настроены корректно.
При необходимости настройки SSL, добавьте соответствующие пути к сертификату и ключу в вашу конфигурацию NGINX.
